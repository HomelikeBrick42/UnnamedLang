proc factorial(n: u64) => u64 {
    if n <= 1 {
        return 1
    } else {
        return n * factorial(n - 1)
    }
}

proc print_u64(value: u64) => void {
    var length <- 0
    {
        var copy <- value
        if copy == 0 {
            length <- 1
        } else {
            while copy > 0 {
                copy <- copy / 10
                length <- length + 1
            }
        }
    }

    var i <- length - 1
    while i >= 0 {
        var copy <- value
        var j <- 0
        while j < i {
            copy <- copy / 10
            j <- j + 1
        }
        let digit = copy % 10 + 48
        print_char(cast(s32) digit)
        i <- i - 1
    }
}

print_u64(factorial(6))
print_char(10)

proc change_value(ptr: ^u64, value: u64) => void {
    ptr^ <- value
}

var foo: u64 <- 5
print_u64(foo)
print_char(10)

change_value(&foo, 10)
print_u64(foo)
print_char(10)

proc print_char(value: s32) => s32 #extern "putchar"
proc input_char() => s32 #extern "getchar"
